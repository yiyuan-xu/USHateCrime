<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data transformation | USHateCrime</title>
  <meta name="description" content="Chapter 3 Data transformation | USHateCrime" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data transformation | USHateCrime" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data transformation | USHateCrime" />
  
  
  

<meta name="author" content="Yunshan An; Zihao Liu; Yiyuan Xu" />


<meta name="date" content="2021-04-13" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-sources.html"/>
<link rel="next" href="missing-values.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/parallel-coordinates-2.1.8/parcoords.css" rel="stylesheet" />
<script src="libs/parcoords-binding-1.0.0/parcoords.js"></script>
<script src="libs/d3-5.16.0/d3.min.js"></script>
<script src="libs/r2d3-render-0.1.0/r2d3-render.js"></script>
<script src="libs/webcomponents-2.0.0/webcomponents.js"></script>
<script src="libs/r2d3-binding-0.2.5/r2d3.js"></script>
<script src="libs/d3v6-6.2.0/d3.min.js"></script>



<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">US Hate Crime</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-sources.html"><a href="data-sources.html#sources-of-data"><i class="fa fa-check"></i><b>2.1</b> Sources of data</a></li>
<li class="chapter" data-level="2.2" data-path="data-sources.html"><a href="data-sources.html#data-definition"><i class="fa fa-check"></i><b>2.2</b> Data definition</a></li>
<li class="chapter" data-level="2.3" data-path="data-sources.html"><a href="data-sources.html#the-limitations-of-data"><i class="fa fa-check"></i><b>2.3</b> The limitations of data</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-transformation.html"><a href="data-transformation.html#background-data"><i class="fa fa-check"></i><b>3.1</b> Background Data</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="data-transformation.html"><a href="data-transformation.html#bias-motivation-data"><i class="fa fa-check"></i><b>3.1.1</b> Bias Motivation Data</a></li>
<li class="chapter" data-level="3.1.2" data-path="data-transformation.html"><a href="data-transformation.html#location-data"><i class="fa fa-check"></i><b>3.1.2</b> Location Data</a></li>
<li class="chapter" data-level="3.1.3" data-path="data-transformation.html"><a href="data-transformation.html#offenders-data"><i class="fa fa-check"></i><b>3.1.3</b> Offenders Data</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data-transformation.html"><a href="data-transformation.html#factor-data"><i class="fa fa-check"></i><b>3.2</b> Factor Data</a></li>
<li class="chapter" data-level="3.3" data-path="data-transformation.html"><a href="data-transformation.html#time-series-data"><i class="fa fa-check"></i><b>3.3</b> Time Series Data</a></li>
<li class="chapter" data-level="3.4" data-path="data-transformation.html"><a href="data-transformation.html#d3-data"><i class="fa fa-check"></i><b>3.4</b> D3 Data</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a>
<ul>
<li class="chapter" data-level="4.1" data-path="missing-values.html"><a href="missing-values.html#location-and-number-of-missing-values"><i class="fa fa-check"></i><b>4.1</b> Location and Number of Missing Values</a></li>
<li class="chapter" data-level="4.2" data-path="missing-values.html"><a href="missing-values.html#patterns-of-missing-values"><i class="fa fa-check"></i><b>4.2</b> Patterns of Missing values</a></li>
<li class="chapter" data-level="4.3" data-path="missing-values.html"><a href="missing-values.html#actions-on-missingabnormal-values"><i class="fa fa-check"></i><b>4.3</b> Actions on missing/abnormal values</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a>
<ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#how-do-us-hate-crimes-look-like-in-2019"><i class="fa fa-check"></i><b>5.1</b> How do US hate crimes look like in 2019?</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="results.html"><a href="results.html#locations-of-hate-crimes"><i class="fa fa-check"></i><b>5.1.1</b> Locations of hate crimes</a></li>
<li class="chapter" data-level="5.1.2" data-path="results.html"><a href="results.html#offenders-of-hate-crimes"><i class="fa fa-check"></i><b>5.1.2</b> Offenders of hate crimes</a></li>
<li class="chapter" data-level="5.1.3" data-path="results.html"><a href="results.html#bias-motivations-behind-hate-crimes"><i class="fa fa-check"></i><b>5.1.3</b> Bias motivations behind hate crimes</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#how-do-a-states-socioeconomic-factors-influence-its-hate-crime-in-2019"><i class="fa fa-check"></i><b>5.2</b> How do a state’s socioeconomic factors influence its hate crime in 2019?</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="results.html"><a href="results.html#hate-crimes-by-states-in-2019"><i class="fa fa-check"></i><b>5.2.1</b> Hate crimes by States in 2019</a></li>
<li class="chapter" data-level="5.2.2" data-path="results.html"><a href="results.html#factors-that-may-influence-hate-crimes"><i class="fa fa-check"></i><b>5.2.2</b> Factors that may influence hate crimes</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="results.html"><a href="results.html#how-do-hate-crimes-change-in-us-from-2010-to-2019"><i class="fa fa-check"></i><b>5.3</b> How do hate crimes change in US from 2010 to 2019?</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="results.html"><a href="results.html#hate-crimes-in-us-in-2010-2019"><i class="fa fa-check"></i><b>5.3.1</b> Hate crimes in US in 2010-2019</a></li>
<li class="chapter" data-level="5.3.2" data-path="results.html"><a href="results.html#hate-crimes-by-states-in-2010-2019"><i class="fa fa-check"></i><b>5.3.2</b> Hate Crimes by States in 2010-2019</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a>
<ul>
<li class="chapter" data-level="6.1" data-path="interactive-component.html"><a href="interactive-component.html#compare-crime-rate-median-income-and-total-cases-between-different-states-over-time"><i class="fa fa-check"></i><b>6.1</b> Compare crime rate, median income and total cases between different states over time</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">USHateCrime</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-transformation" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Data transformation</h1>
<div id="background-data" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Background Data</h2>
<p>In order to provide some information about 2019’s hate crime in U.S., we get data about hate crime’s bias motivation, location and information of offenders. Since the goal of all these data files is simply to show their content, we do not do much transformation on them.</p>
<div id="bias-motivation-data" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Bias Motivation Data</h3>
<p>Since this data file is used to show types of bias motivations and the corresponding values of hate crime cases, we simply download the excel file of the source data, delete useless columns, and finally convert it into csv. The columns we keep from raw data are:</p>
<ul>
<li><p>Bias_Motivation</p></li>
<li><p>Incidents</p></li>
<li><p>Category</p></li>
</ul>
<pre><code>##                                  Bias_motivation Incidents                Category
## 1                                     Anti-White       666 Race/Ethnicity/Ancestry
## 2                 Anti-Black or African American      1930 Race/Ethnicity/Ancestry
## 3          Anti-American Indian or Alaska Native       119 Race/Ethnicity/Ancestry
## 4                                     Anti-Asian       158 Race/Ethnicity/Ancestry
## 5 Anti-Native Hawaiian or Other Pacific Islander        21 Race/Ethnicity/Ancestry
## 6                     Anti-Multiple Races, Group       134 Race/Ethnicity/Ancestry</code></pre>
</div>
<div id="location-data" class="section level3" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Location Data</h3>
<p>The source data have many columns including one column of location type and one column of total incidents happened in the corresponding type of location. We download the excel file of the source data, delete other columns, keep the two columns described before and then transform the file into a csv file. The columns we use from raw data are:</p>
<ul>
<li><p>Location</p></li>
<li><p>Total incidents (renamed as Num in our file)</p></li>
</ul>
<pre><code>##                             Location Num
## 1      Abandoned/condemned structure  11
## 2             Air/bus/train terminal 113
## 3                     Amusement park   5
## 4 Arena/stadium/fairgrounds/coliseum   9
## 5           Auto dealership new/used   6
## 6              Bank/savings and loan  21</code></pre>
</div>
<div id="offenders-data" class="section level3" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> Offenders Data</h3>
<p>The original data table shows the number of offenders for specific race, ethnicity and age. Its column names are:</p>
<ul>
<li><p>Race/Ethnicity/Age</p></li>
<li><p>Total</p></li>
</ul>
<p>We can see that it includes all types of information into one column. Thus, after downloading the excel file, we add one Group column which declares whether the entity is a type of race, ethnicity or age and then transform it into a csv file. The columns in our table now are:</p>
<ul>
<li><p>Offenders: specific race/ethnicity/age such as White/Hispanic/&lt;18</p></li>
<li><p>Num: same as column of Total in the original table</p></li>
<li><p>Group: can only be race, ethnicity or age</p></li>
</ul>
<pre><code>##                       Offenders   Num Group
## 1                         White 3,365  Race
## 2        Black/African American 1,532  Race
## 3 American Indian/Alaska Native    68  Race
## 4                         Asian    58  Race
## 5              Pacific Islander    22  Race
## 6                   Multi Races   425  Race</code></pre>
</div>
</div>
<div id="factor-data" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Factor Data</h2>
<p>We collect data for different factors such as household median income, educational level, citizen status, race/ethnicity, political parties of each state, unemployment rate. They are all farmatted such that rows represent states and columns represent measures. We choose and store ‘state-value’ data pairs and combine them with crime data as well as population data. We then merge them all into one csv file called Mixed_data whose rows are states and columns are measures such as median income, education level, etc. All above steps are done in python.</p>
<pre><code>##        State Offenses Median.Income Education.Level High_School_Rate Bachelor_Rate
## 1    Alabama        0         51734           30.23             86.2          25.5
## 2     Alaska       17         75463           49.19             92.8          29.6
## 3    Arizona      254         62055           42.61             87.1          29.5
## 4   Arkansas       10         48952            27.9             86.6            23
## 5 California     1221         80440           50.03             83.3          33.9
## 6   Colorado      257         77127           67.97             91.7          40.9
##   Citizenship.Status Race.Ethnicity Political.Party Unemployment.Rate Population
## 1              0.980          0.654      Republican             0.030      85670
## 2              0.971          0.600      Republican             0.062     727792
## 3              0.926          0.542      Republican             0.049    6395924
## 4              0.968          0.721      Republican             0.035    2813597
## 5              0.875          0.364        Democrat             0.040   39502561
## 6              0.952          0.678        Democrat             0.027    5705335
##   Cost.of.Living
## 1           89.3
## 2          129.9
## 3             97
## 4           86.9
## 5          151.7
## 6          105.6</code></pre>
</div>
<div id="time-series-data" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Time Series Data</h2>
<p>The source data have hate crimes cases and population covered for each state in one year. We then download excel files including data from 2010 to 2019. For each year’s data table, we only keep columns of the total number of offense cases, state names and population covered. We also calculate hate crime cases per 10k population and add another column to indicate which year the state’s hate crime data is from. Finally, we combine all year’s tables into one csv file. The final transformed table includes values:</p>
<ul>
<li><p>State</p></li>
<li><p>Case</p></li>
<li><p>Population</p></li>
<li><p>hate_crime_per_10k: Case/(Population/100000)</p></li>
<li><p>year: 2010, 2011,…, 2019</p></li>
</ul>
<pre><code>##        State Case Population hate_crime_per_100k year
## 1    Alabama    0      85670           0.0000000 2019
## 2     Alaska   17     727792           2.3358322 2019
## 3    Arizona  254    6395924           3.9712792 2019
## 4   Arkansas   10    2813597           0.3554169 2019
## 5 California 1221   39502561           3.0909388 2019
## 6   Colorado  257    5705335           4.5045558 2019</code></pre>
</div>
<div id="d3-data" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> D3 Data</h2>
<p>For the interactive plot we plan to show comparisons of different measures over time between two states. But due to the difficulty of finding historical data for the past ten years, we only find data for median income and hate crime for years between 2010 and 2019. We read the data from source csv files and store ‘state-year-measure’ data pairs for all measures. Then we merge them all into one single csv file with rows representing states and columns representing measures. The whole process is done using python</p>
<pre><code>##     State Offenses Population Crime_Rate Median_Income Year
## 1 Alabama        0      85670  0.0000000         56200 2019
## 2 Alabama        0    1865517  0.0000000         50841 2018
## 3 Alabama        9    2918324  0.3083962         53049 2017
## 4 Alabama       17    1013839  1.6767948         50308 2016
## 5 Alabama       12    1252146  0.9583547         48030 2015
## 6 Alabama       10     794907  1.2580088         45701 2014</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-sources.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="missing-values.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/yiyuan-xu/USHateCrime/edit/main/03-cleaning.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/yiyuan-xu/USHateCrime/blob/main/03-cleaning.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
